!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.nigmajs=t():e.nigmajs=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return L})),r.d(t,"BasicCipher",(function(){return n})),r.d(t,"Columnar",(function(){return l})),r.d(t,"Dictionary",(function(){return y})),r.d(t,"Shift",(function(){return w})),r.d(t,"Enigma",(function(){return N}));class n{constructor(e,t,r,n,o,s){a.call(this),this.message=e,this.encoded=t,this.method=r,this.key=null!=n?n:"",this.alphabet=o,this.debug=s}setMsg(e){return this.message=e,this}setEncoded(e){return this.encoded=e,this}setMethod(e){return this.method=e,this}setKey(e){return this.key=e,this}setAlphabet(e){return this.alphabet=e,this}sortColumns(e,t){return e[0]===t[0]?0:e[0]<t[0]?-1:1}}var a=function(){var e=this;this.getMsg=function(){return e.message},this.getEncoded=function(){return e.encoded},this.getMethod=function(){return e.method},this.getKey=function(){return e.key},this.getAlphabet=function(){return e.alphabet},this.shiftCharacters=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=t;Math.abs(r)>26&&(r%=26),r<0&&(r+=26);for(var n="",a=0;a<e.length;a+=1){var o=e[a];if(o.match(/[a-z]/i)){var s=e.charCodeAt(a);if(s>=65&&s<=90){o=String.fromCharCode((s-65+r)%26+65)}else s>=97&&s<=122&&(o=String.fromCharCode((s-97+r)%26+97))}n+=o}return n},this.text2block=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e,n=(r=r.replace(/ /g,""))[0],a=1;do{a%t==0&&(n+=" "),n+=r[a],a+=1}while(a<r.length);return n},this.encodeAlphabet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",a="";return t.toLowerCase().split(" ").map((function(t){t.split("").map((function(t){var n=e.getKeyByValue(e.alphabet,t);void 0!==n&&(a+=n+r)})),r.length>0&&(a=a.slice(0,-r.length)),a+=n})),n.length>0&&(a=a.slice(0,-n.length)),a},this.decodeAlphabet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",a="";return t.split(n).map((function(t){t.split(r).map((function(t){var r=e.alphabet[t];void 0!==r&&(a+=r)})),a+=" "})),a=a.slice(0,-1)},this.validateEncoded=function(){return!0===e.encoded&&null!=e.message&&""!==e.message},this.transposeMatrix=function(e){return e[0].map((function(t,r){return e.map((function(e){return e[r]}))}))},this.getKeyByValue=function(e,t){return Object.keys(e).find((function(r){return e[r]===t}))},this.logMessage=function(t){e.debug&&console.log(t)},this.test=function(){return"NigmaJS enabled"}},o={A:12.5,K:.08,T:4.42,B:1.27,L:5.84,U:4,C:4.43,M:2.61,V:.98,D:5.14,N:7.09,W:.03,E:13.24,"Ñ":.22,X:.19,F:.79,O:8.98,Y:.79,G:1.17,P:2.75,Z:.42,H:.81,Q:.83,I:6.91,R:6.62,J:.45,S:7.44},s={DE:2.57,AD:1.43,TA:1.09,ES:2.31,AR:1.43,TE:1,EN:2.27,RE:1.42,OR:.98,EL:2.01,AL:1.33,DO:.98,LA:1.8,AN:1.24,IO:.98,OS:1.79,NT:1.22,AC:.96,ON:1.61,UE:1.21,ST:.95,AS:1.56,CI:1.15,NA:.92,ER:1.52,CO:1.13,RO:.85,RA:1.47,SE:1.11,UN:.84},i={DEL:.75,EST:.48,PAR:.32,QUE:.74,LOS:.47,DES:.31,ENT:.67,ODE:.47,ESE:.3,ION:.56,ADO:.45,IEN:.3,ELA:.55,RES:.4,ALA:.29,CON:.54,STA:.38,POR:.29,SDE:.52,ACI:.36,ONE:.29,ADE:.51,LAS:.35,NDE:.29,CIO:.5,ARA:.34,TRA:.28,NTE:.49,ENE:.32,NES:.27},c={CION:.42,MENT:.16,NCIA:.14,DELA:.33,IONE:.16,AQUE:.14,ACIO:.27,ODEL:.16,SQUE:.14,ENTE:.25,ONDE:.16,ENCI:.13,ESTA:.22,OQUE:.15,ENLA:.13,ESDE:.22,IDAD:.15,ENTR:.13,PARA:.19,ELOS:.15,IENT:.12,ONES:.17,ADEL:.15,ASDE:.12,SDEL:.17,ANTE:.15,ENEL:.12,OSDE:.17,ENTO:.14,DELO:.12};class h{static validateMessage(e){if(null==e)throw new TypeError("Message cannot be null or undefined");if("string"!=typeof e)throw new TypeError("Message must be a string, got ".concat(typeof e));if(""===e.trim())throw new Error("Message cannot be empty");return!0}static validateKey(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";if(null==e)throw new TypeError("Key cannot be null or undefined");if("number"===t&&"number"!=typeof e)throw new TypeError("Key must be a number, got ".concat(typeof e));if("string"===t&&"string"!=typeof e)throw new TypeError("Key must be a string, got ".concat(typeof e));if("number"===t&&isNaN(e))throw new TypeError("Key must be a valid number, got NaN");return!0}static validateAlphabet(e){if(null==e)throw new TypeError("Alphabet cannot be null or undefined");if("object"!=typeof e)throw new TypeError("Alphabet must be an object, got ".concat(typeof e));if(Array.isArray(e))throw new TypeError("Alphabet must be an object, not an array");return!0}static validateBoolean(e){if("boolean"!=typeof e)throw new TypeError("".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value"," must be a boolean, got ").concat(typeof e));return!0}}var u=function(){var e=this;this.decodingConstructor=function(t,r){var n=r.split("").map((function(e){return e-1})),a=[];n.map((function(e){a.push([e])}));var o=e.generateDecodingMatrix(t.length,n,1,2);return[a,o,n]},this.validateKey=function(){var t=!0,r=e.key.split("").sort(),n=/^\d+$/;if(e.logMessage("Check for [0-9] chars only: ".concat(n.test(e.key)," key analyzed : ").concat(e.key)),n.test(e.key)){e.logMessage("Numbers only Key: ".concat(r," "));var a=0;do{var o=r[a];e.logMessage("Validating ... Char ".concat(o," of type ").concat(typeof o," at ").concat(a)),o===(1+a).toString()?a+=1:(t=!1,e.logMessage("Sequence not validated"))}while(!0===t&&a<r.length)}else e.logMessage("Invalid key, Non numbers detected"),t=!1;return t},this.generateDecodingMatrix=function(e,t,r,n){var a=[],o=r||1,s=n||2;t.map((function(e){a.push([])}));var i=0;do{a.forEach((function(t){i<e?e-i>o?t.push(o):t.push(e-i):t.push(0),i+=o,o=o===r?s:r})),o=o===r?s:r}while(i<e);return a},this.processMatrixDecoding=function(t,r,n){var a=0,o=1,s=0,i=t,c=r,h=n;do{var u=0,l=h.indexOf(s);do{o=a+c[l][u];var d=e.message.slice(a,o);i[l].push(d),a=o,u+=1}while(u<c[l].length);s+=1}while(s<c.length);return i},this.decode=function(){h.validateMessage(e.message);var t=[];if(!e.validateKey())throw new Error("Invalid key format for AMSCO cipher. Key must contain sequential numbers 1-n.");var r=e.decodingConstructor(e.message,e.key);return t=e.processMatrixDecoding(r[0],r[1],r[2]),(t=e.transposeMatrix(t)).shift(),t=(t=t.map((function(e){return e.join("")}))).join(""),e.logMessage("Done decoding: ".concat(t)),t},this.encode=function(){h.validateMessage(e.message);var t="",r=[],n=[],a="";if(!e.validateKey())throw new Error("Invalid key format for AMSCO cipher. Key must contain sequential numbers 1-n.");t=e.message.replace(/\s+/g,"").toLocaleUpperCase();var o=e.decodingConstructor(e.message,e.key);[r]=o,n=e.transposeMatrix(o[1]);var s=0,i=0;return n.forEach((function(e){e.forEach((function(n){r[i].push(t.slice(s,s+n)),s+=n,i<e.length-1?i+=1:i=0}))})),r.sort(e.sortFunction),r.forEach((function(e){e.shift(),a+=e.join("")})),a}},l={Amsco:class extends n{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]&&arguments[2],"amsco",t,"",arguments.length>3&&void 0!==arguments[3]&&arguments[3]),u.call(this)}}};var d=function(){var e=this;this.encode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message;return e.encodeAlphabet(t,e.characterSep,e.wordSep)},this.decode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message;return e.decodeAlphabet(t,e.characterSep,e.wordSep)}};var g=function(){var e=this;this.encode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key,n=t.toLowerCase().replace(/[^a-z]/g,""),a=r.toLowerCase().replace(/[^a-z]/g,""),o="";if(n.length>=1&&a.length>1)for(var s=0;s<n.length;s+=1)s<a.length?o+=String.fromCharCode((n.charCodeAt(s)-97+(a.charCodeAt(s)-97)+26)%26+97):o+=String.fromCharCode((n.charCodeAt(s)-97+(n.charCodeAt(s-a.length)-97)+26)%26+97);return o},this.decode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key,n=t.toLowerCase().replace(/[^a-z]/g,""),a=r.toLowerCase().replace(/[^a-z]/g,""),o="";if(n.length>1&&a.length>1)for(var s=0;s<n.length;s+=1)s<a.length?o+=String.fromCharCode((n.charCodeAt(s)-97-(a.charCodeAt(s)-97)+26)%26+97):o+=String.fromCharCode((n.charCodeAt(s)-97-(o.charCodeAt(s-a.length)-97)+26)%26+97);return o}};var f=function(){var e=this;this.encode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message;return e.encodeAlphabet(t,e.characterSep,e.wordSep)},this.decode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message;return e.decodeAlphabet(t,e.characterSep,e.wordSep)}};class v extends n{constructor(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"," ":" ",".":".",",":",","?":"?","!":"!"};super(e,arguments.length>4&&void 0!==arguments[4]&&arguments[4],"simpleSubstitution",t,a,arguments.length>5&&void 0!==arguments[5]&&arguments[5]),p.call(this),this.i=r,this.v=n,this.key=this.validateKey(t),this.setAlphabet(this.alphabetConstructor(a,this.key)),this.wordSep=" ",this.characterSep=""}}var p=function(){var e=this;this.getI=function(){return e.i},this.getV=function(){return e.v},this.validateKey=function(e){var t=e.replace(/\s/g,"");return t=t.toLowerCase()},this.validateRemovedChars=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.v;return!0===r&&106===t||!0===n&&118===t},this.putLetter2Alphabet=function(t,r,n,a){var o=n,s=a;return r.includes(t)||e.validateRemovedChars(t.charCodeAt(0))||(e.validateRemovedChars(s,e.i,e.v)&&(delete o[String.fromCharCode(s)],s+=1),o[String.fromCharCode(s)]=t,r.push(t),s+=1),[t,r,o,s]},this.alphabetConstructor=function(t,r){var n=[],a=97;r.split("").forEach((function(r){[r,n,t,a]=e.putLetter2Alphabet(r,n,t,a)}));var o=97,s="";do{s=String.fromCharCode(o),[s,n,t,a]=e.putLetter2Alphabet(s,n,t,a),o+=1}while(a<123);return t},this.encode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message;return h.validateMessage(t),e.encodeAlphabet(t,e.characterSep,e.wordSep)},this.decode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message;return h.validateMessage(t),e.decodeAlphabet(t,e.characterSep,e.wordSep)}};var b=function(){var e=this;this.transpositionAlphabet=function(t,r){var n=e.alphabet,a=[],o=[];Object.keys(n).forEach((function(e){e.charCodeAt(0)>=97&&e.charCodeAt(0)<=123&&o.push(n[e]),o.length===r&&(a.push(o),o=[])})),a=(a=e.transposeMatrix(a)).join();var s=97;a.split(",").forEach((function(e){n[String.fromCharCode(s)]=e,s+=1})),e.setAlphabet(n)},this.encode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message;return e.encodeAlphabet(t,e.characterSep,e.wordSep)},this.decode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message;return e.decodeAlphabet(t,e.characterSep,e.wordSep)}};var m=function(){var e=this;this.encode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message;return h.validateMessage(t),e.encodeAlphabet(t,e.characterSep,e.wordSep)},this.decode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message;return h.validateMessage(t),e.decodeAlphabet(t,e.characterSep,e.wordSep)}},y={Atbash:class extends n{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],"atbash","",{4:"a",3:"b",2:"c",1:"d",0:"e",z:"f",y:"g",x:"h",w:"i",v:"j",u:"k",t:"l",s:"m",r:"n",q:"o",p:"p",o:"q",n:"r",m:"s",l:"t",k:"u",j:"v",i:"w",h:"x",g:"y",f:"z",e:"0",d:"1",c:"2",b:"3",a:"4","!":"5","?":"6",",":"7",".":"8"," ":"9",9:" ",8:".",7:",",6:"?",5:"!"},arguments.length>2&&void 0!==arguments[2]&&arguments[2]),d.call(this),this.wordSep=" ",this.characterSep=""}},Autokey:class extends n{constructor(e,t,r,n){super(e,r,"autoKey",t,"",n),g.call(this)}},Baconian:class extends n{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],"baconian","",{aaaaa:"a",aaaab:"b",aaaba:"c",aaabb:"d",aabaa:"e",aabab:"f",aabba:"g",aabbb:"h",abaaa:"i",abaab:"j",ababa:"k",ababb:"l",abbaa:"m",abbab:"n",abbba:"o",abbbb:"p",baaaa:"q",baaab:"r",baaba:"s",baabb:"t",babaa:"u",babab:"v",babba:"w",babbb:"x",bbaaa:"y",bbaab:"z"},arguments.length>2&&void 0!==arguments[2]&&arguments[2]),f.call(this),this.wordSep="   ",this.characterSep=" "}},Bazeries:class extends v{constructor(e,t){super(e,t,!0,!1,arguments.length>2&&void 0!==arguments[2]&&arguments[2],"",{},arguments.length>3&&void 0!==arguments[3]&&arguments[3]),b.call(this),this.method="bazeries",this.wordSep=" ",this.characterSep="",this.transpositionAlphabet(5,5)}},Morse:class extends n{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],"morse","",{"-----":"0",".----":"1","..---":"2","...--":"3","....-":"4",".....":"5","-....":"6","--...":"7","---..":"8","----.":"9",".-":"a","-...":"b","-.-.":"c","-..":"d",".":"e","..-.":"f","--.":"g","....":"h","..":"i",".---":"j","-.-":"k",".-..":"l","--":"m","-.":"n","---":"o",".--.":"p","--.-":"q",".-.":"r","...":"s","-":"t","..-":"u","...-":"v",".--":"w","-..-":"x","-.--":"y","--..":"z","/":" ","-·-·--":"!","·-·-·-":".","--··--":","}),m.call(this),this.wordSep="   ",this.characterSep=" "}},SimpleSubstitution:v};var A=function(){var e=this;this.encode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return h.validateMessage(t),h.validateKey(r,"number"),e.shiftCharacters(t,r)},this.decode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return h.validateMessage(t),h.validateKey(r,"number"),e.shiftCharacters(t,-r)}};var S=function(){var e=this;this.encode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return e.shiftCharacters(t,r)},this.decode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return e.shiftCharacters(t,-r)}};var C=function(){var e=this;this.encode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return e.shiftCharacters(t,r)},this.decode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return e.shiftCharacters(t,-r)}};var E=function(){var e=this;this.encode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return e.shiftCharacters(t,r)},this.decode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return e.shiftCharacters(t,-r)}};var M=function(){var e=this;this.encode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return e.shiftCharacters(t,r)},this.decode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return e.shiftCharacters(t,-r)}};var O=function(){var e=this;this.encode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return e.shiftCharacters(t,r)},this.decode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.message,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return e.shiftCharacters(t,-r)}},w={CaesarShift:class extends n{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]&&arguments[2],"caesarShift",t,"",arguments.length>3&&void 0!==arguments[3]&&arguments[3]),A.call(this)}},Rot5:class extends n{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],"rot5",5,"",arguments.length>2&&void 0!==arguments[2]&&arguments[2]),S.call(this)}},Rot7:class extends n{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],"rot7",7,"",arguments.length>2&&void 0!==arguments[2]&&arguments[2]),C.call(this)}},Rot13:class extends n{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],"rot13",13,"",arguments.length>2&&void 0!==arguments[2]&&arguments[2]),E.call(this)}},Rot18:class extends n{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],"rot18",18,"",arguments.length>2&&void 0!==arguments[2]&&arguments[2]),M.call(this)}},Rot47:class extends n{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],"rot47",47,"",arguments.length>2&&void 0!==arguments[2]&&arguments[2]),O.call(this)}}};class N extends n{constructor(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AAA",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AAA",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"PO ML IU KJ NH YT GB VF RE DC",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"123";super(e,arguments.length>5&&void 0!==arguments[5]&&arguments[5],"enigma","","",arguments.length>6&&void 0!==arguments[6]&&arguments[6]),t=this,this.initialize=function(){t.rotorsettings=t.rotorSettings.replace(/[^1-9]/g,""),t.keysettings=t.keySettings.toUpperCase().replace(/[^A-Z]/g,""),t.ringsettings=t.ringSettings.toUpperCase().replace(/[^A-Z]/g,""),t.plugboardsettings=t.plugboardSettings.toUpperCase().replace(/[^A-Z]/g,"")},this.setupPlugboard=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=e.split(""),n=0,a=1;n<t.plugboardsettings.length;n+=2,a+=2){var o=e.indexOf(t.plugboardsettings.charAt(n)),s=e.indexOf(t.plugboardsettings.charAt(a)),i=r[s];r[s]=r[o],r[o]=i}return e=r.join("")},this.setupKey=function(){var e=t.keysettings.split("");return e[0]=t.code(e[0]),e[1]=t.code(e[1]),e[2]=t.code(e[2]),e},this.setupCode=function(){var e=t.ringsettings.split("");return e[0]=t.code(e[0]),e[1]=t.code(e[1]),e[2]=t.code(e[2]),e},this.getRotors=function(){var e=t.rotorsettings.split("");return e[0]=e[0].valueOf()-1,e[1]=e[1].valueOf()-1,e[2]=e[2].valueOf()-1,e},this.encode=function(){h.validateMessage(t.message);var e="",r=t.message.replace(/[^A-Z]/g,"");if(t.initialize(),t.validateSettings(r)){var n=t.getRotors(),a=t.setupPlugboard(),o=t.setupKey(),s=t.setupCode(),i="",c="";r.split("").forEach((function(r){(i=r).match(/[A-Z]/)?(o=t.incrementSettings(o,n),c=t.enigmaChar(i,o,n,s,a),e+=c):e+=i}))}return e},this.validateSettings=function(e){var r=!0;return e.length<1&&(r=!1),3!==t.keysettings.length&&(r=!1),3!==t.ringsettings.length&&(r=!1),t.plugboardsettings.length>26&&(r=!1),t.plugboardsettings.length%2!=0&&(r=!1),3!==t.rotorsettings.length&&(r=!1),r},this.enigmaChar=function(e,r,n,a,o){var s=e;return s=t.simplesub(s,o),s=t.rotor(s,n[2],r[2]-a[2]),s=t.rotor(s,n[1],r[1]-a[1]),s=t.rotor(s,n[0],r[0]-a[0]),s=t.simplesub(s,"YRUHQSLDPXNGOKMIEBFZCWVJAT"),s=t.rotor(s,n[0]+8,r[0]-a[0]),s=t.rotor(s,n[1]+8,r[1]-a[1]),s=t.rotor(s,n[2]+8,r[2]-a[2]),s=t.simplesub(s,o)},this.incrementSettings=function(e,t){var r=e,n=[[16,16],[4,4],[21,21],[9,9],[25,25],[25,12],[25,12],[25,12]];return r[1]!==n[t[1]][0]&&r[1]!==n[t[1]][1]||(r[0]=(r[0]+1)%26,r[1]=(r[1]+1)%26),r[2]!==n[t[2]][0]&&r[2]!==n[t[2]][1]||(r[1]=(r[1]+1)%26),r[2]=(r[2]+1)%26,r},this.simplesub=function(e,r){return r.charAt(t.code(e))},this.rotor=function(e,r,n){var a=(t.code(e)+26+n)%26,o=(t.code(["EKMFLGDQVZNTOWYHXUSPAIBRCJ","AJDKSIRUXBLHWTMCQGZNPYFVOE","BDFHJLCPRTXVZNYEIWGAKMUSQO","ESOVPZJAYQUIRHXLNFTGKDCMWB","VZBRGITYUPSDNHLXAWMJQOFECK","JPGVOUMFYQBENHZRDKASXLICTW","NZJHGRCXMYSWBOUFAIVLPEKQDT","FKQHTLXOCBJSPDZRAMEWNIUYGV","UWYGADFPVZBECKMTHXSLRINQOJ","AJPCZWRLFBDKOTYUQGENHXMIVS","TAGBPCSDQEUFVNZHYIXJWLRKOM","HZWVARTNLGUPXQCEJMBSKDYOIF","QCYLXWENFTZOSMVJUDKGIARPHB","SKXQLHCNWARVGMEBJPTYFDZUIO","QMGYVPEDRCWTIANUXFKZOSLHJB","QJINSAYDVKBFRUHMCPLEWZTGXO"][r].charAt(a))+26-n)%26+65;return String.fromCharCode(o)},this.code=function(e){return e.toUpperCase().charCodeAt(0)-65},this.message=e.toUpperCase(),this.keySettings=r,this.ringSettings=n,this.plugboardSettings=a,this.rotorSettings=o}}class L{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";T.call(this),this.testMessages=["abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ","Las dos jornadas tuvieron un denominador común: insistir, y mucho, en educar en temas financieros, a los efectos de que la gente tenga claro cuáles son las ventajas y riesgos a los que se enfrenta.","Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dapibus suscipit velit vitae vulputate. Vivamus vel tempus lacus. Fusce dictum, leo id porttitor dapibus, leo diam rutrum nulla, ut feugiat","La posición de Washington hacia las elecciones en Palestina ha sido coherente. Las elecciones fueron postergadas hasta la muerte de Yasser Arafat, que fue recibida como una oportunidad para la realización  "],this.message=e,this.alphabet={a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"," ":" ",".":".",",":",","?":"?","!":"!"}}}var T=function(){var e=this;this.getTestMessage=function(t){return e.testMessages[t]},this.getChar=function(t){return e.alphabet[t]},this.setChar=function(t,r){return e.alphabet[t]=r,e.processMessage()},this.resetAlphabet=function(){return Object.keys(e.alphabet).map((function(t,r){return e.alphabet[t]=t})),e.processMessage()},this.swapChar=function(t,r){var n=e.alphabet[t];return e.alphabet[t]=e.alphabet[r],e.alphabet[r]=n,e.processMessage()},this.setByFrequency=function(){var t=e.sortProperties(e.freqAnalysis(e.message)),r=e.sortProperties(e.getSLFreq()),n=0;do{e.setChar(String(r[n][0]).toLowerCase(),String(t[n][0]).toLowerCase()),n+=1}while(n<t.length-1);return e.processMessage()},this.processMessage=function(){var t="";return e.message.split("").forEach((function(r){var n=e.alphabet[r];t+=""!==n?n:"?"})),t},this.getSLFreq=function(){return o},this.getS2Freq=function(){return s},this.getS3Freq=function(){return i},this.getS4Freq=function(){return c},this.freqAnalysis=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={},r=e.split("");r.forEach((function(e){e in t?t[e]+=1:t[e]=1}));var n=r.length;return Object.keys(t).forEach((function(e){var r=t[e];t[e]=parseFloat((r/n*100).toFixed(3))})),t},this.sortProperties=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc",r=[];return e.forEach((function(t){r.push([t,e[t]])})),"asc"===t?r.sort((function(e,t){return e[1]-t[1]})):r.sort((function(e,t){return t[1]-e[1]})),r}}}])}));